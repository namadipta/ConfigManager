<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Config Manager</title>
    <link rel="stylesheet" href="assets/vendors/iconfonts/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="assets/vendors/iconfonts/ionicons/dist/css/ionicons.css">
    <link rel="stylesheet" href="assets/vendors/iconfonts/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.addons.css">
     <link rel="stylesheet" href="assets/vendors/iconfonts/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="assets/css/shared/style.css">
    <link rel="stylesheet" href="assets/css/demo_1/style.css">
    <link rel="shortcut icon" href="assets/images/favicon.ico" />
  </head>
  <body>
    <div class="container-scroller" style="width: 100%; height: 100%;">
    <input type="hidden" id="modelAttr" name="fault" th:value="${fault}"/>
	<input type="hidden" id="tab" name="tab" th:value="${tab}"/>
      <div th:replace="fragments/header :: header"></div>
      <div class="container-fluid page-body-wrapper">
         <div th:replace="fragments/sidebar :: sidebar"></div>
         <div class="main-panel" style="width: 81%; height: 100%;">
        <div  th:replace="${bulkpage == null && comparepage == null} ? ~{fragments/appdetails :: appdetails}: ~{}"></div>
        <div  th:replace="${bulkpage == 'true'} ? ~{fragments/bulkupload :: bulkupload}: ~{}"></div>
         <div  th:replace="${comparepage == 'true'} ? ~{fragments/comparepage :: comparepage}: ~{}"></div>
        
          <div class="content-wrapper" th:replace="@{'views/' + ${content}} :: ${content}"></div>


                <div th:replace="fragments/footer :: footer"></div>
        </div>
          
                
        </div>
        </div>
    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <script src="assets/vendors/js/vendor.bundle.addons.js"></script>
    <script src="assets/js/shared/off-canvas.js"></script>
    <script src="assets/js/shared/misc.js"></script>
	<script src="footable/js/footable.js"></script>
	<script src="footable/js/footable.min.js"></script>
    <script>
    

$('.module-class').click(function(e) {
	e.preventDefault();
    $('.module-class').removeClass('active');
    $('.module-class').css("background", "linear-gradient(to top, #2196f3, #2196f3)");
    $(this).addClass('active');
    $(this).css("background", "#0f25d5");
	  $('#selectedProfile').prop('selectedIndex',0);
	  $('#selectedLabel').prop('selectedIndex',0);
	  var selectedModuleId = $('.active').find('span').attr('id');
	  $('#modId').val(selectedModuleId);
	  $('#selectedModule').val(selectedModuleId);
	  
});

$('#selectedProfile').change(function(e) {
	  $('#selectedLabel').prop('selectedIndex',0);
});
$(document).on("change",".compareSource",function(){
	  $("option[value=" + this.value + "]", this)
	  .attr("selected", true).siblings()
	  .removeAttr("selected")
});

$('.compareSource').change(function(e) {
	 $('#sourceSelectedPropVersion').prop('selectedIndex',0);
	 if($('#sourceSelectedModule').val() == null || $('#sourceSelectedModule').val() == ''){
		 return ;
	 }
	 if($('#sourceSelectedProfile').val() == null || $('#sourceSelectedProfile').val() == ''){
		 return ;
	 }
	 if($('#sourceSelectedLabel').val() == null || $('#sourceSelectedLabel').val() == ''){
		 return ;
	 } 
	 e.preventDefault();
	 $.ajax({
	        type: "GET",
	        contentType: "application/json",
	        url: "/fetchpropversion?selectedModule=" + $('#sourceSelectedModule').val() + '&selectedProfile='+$('#sourceSelectedProfile').val() + '&selectedLabel='+$('#sourceSelectedLabel').val() + '&appId='+$('#appId').val(),
	        dataType: 'json',
	        success: function (data) {

	        	$.each(data,function(i,obj)
	                    {
	                     	var div_data="<option value="+obj.id+">"+obj.text+"</option>";
	                   		 $(div_data).appendTo('#sourceSelectedPropVersion'); 
	                    });  
            },
	        error: function (e) {
	           alert(e);

	        }
	    });
	 
});

$('.compareTarget').change(function(e) {
	  $('#targetSelectedPropVersion').prop('selectedIndex',0);
		 if($('#targetSelectedModule').val() == null || $('#targetSelectedModule').val() == ''){
			 return ;
		 }
		 if($('#targetSelectedProfile').val() == null || $('#targetSelectedProfile').val() == ''){
			 return ;
		 }
		 if($('#targetSelectedLabel').val() == null || $('#targetSelectedLabel').val() == ''){
			 return ;
		 } 
	  e.preventDefault();
	  var requestData = $('#compareprops').serialize() + '&query=target';
	  $.ajax({
		  	type: "GET",
	        contentType: "application/json",
	        url: "/fetchpropversion?selectedModule=" + $('#targetSelectedModule').val() + '&selectedProfile='+$('#targetSelectedProfile').val() + '&selectedLabel='+$('#targetSelectedLabel').val() + '&appId='+$('#appId').val(),
	        dataType: 'json',
	        success: function (data) {

	        	$.each(data,function(i,obj)
	                    {
	                     	var div_data="<option value="+obj.id+">"+obj.text+"</option>";
	                   		 $(div_data).appendTo('#targetSelectedPropVersion'); 
	                    });  
            },
	        error: function (e) {
	           alert(e);

	        }
	    });
});

$('#editProp').click(function(e) {
	$('.edittool').show();
	$('.edittool').css("cursor", "pointer");
	$(this).hide();
	$('#saveProp').toggle();
});

$(".fa-minus-circle").click(function(e) {
	  $(this).closest('tr').remove();
});

$("#addProperties").click(function(e) {
	var nextRowId = parseInt($('#counter').val())+1 ;
	var $clonedRow = $('tbody tr:first').clone();
    $clonedRow.find('td').each(function(){
        var el = $(this).find(':first-child');
        var id = el.attr('id') || null;
        if(id != null && id.indexOf(".id") != -1) {
            var i = id.substr(id.length-4);
            var prefix = id.substr(0, (id.length-4));
            el.attr('id', prefix+"["+nextRowId+"].id");
            el.attr('name', prefix+"["+nextRowId+"].id");
        }
   	   if(id != null && id.indexOf(".text") != -1) {
           var i = id.substr(id.length-6);
           var prefix = id.substr(0, (id.length-6));
           el.attr('id', prefix+"["+nextRowId+"].text");
           el.attr('name', prefix+"["+nextRowId+"].text");
       }
   	  if(id != null && id.indexOf(".hide1") != -1) {
           var i = id.substr(id.length-6);
           var prefix = id.substr(0, (id.length-6));
           el.attr('id', prefix+"["+nextRowId+"].hide");
           el.attr('name', prefix+"["+nextRowId+"].hide");
      }
    });
	$clonedRow.find('textarea').val('');
	$('#propDetailsTable tbody').append($clonedRow); 
	$('#counter').val(nextRowId);
});
function myFunction() {
	  // Declare variables
	  var input, filter, table, tr, td, td1, i, txtValue;
	  input = document.getElementById("myInput");
	  filter = input.value.toUpperCase();
	  table = document.getElementById("propDetailsTable");
	  tr = table.getElementsByTagName("tr");

	  // Loop through all table rows, and hide those who don't match the search query
	  for (i = 0; i < tr.length; i++) {
	    td = tr[i].getElementsByTagName("td")[0];
	    td1 = tr[i].getElementsByTagName("td")[1];
	    if (td) {
	      txtValue = td.textContent || td.innerText;
	      if (txtValue.toUpperCase().indexOf(filter) > -1) {
	        tr[i].style.display = "";
	      } else {
	        tr[i].style.display = "none";
	      }
	    } 
	    if (td1) {
		      txtValue = td1.textContent || td1.innerText;
		      if (txtValue.toUpperCase().indexOf(filter) > -1) {
		        tr[i].style.display = "";
		      } else {
		        tr[i].style.display = "none";
		      }
		 }
	  }
	}	
/* $('[data-page-size]').on('click', function(e){
	e.preventDefault();
	var newSize = $(this).data('pageSize');
	('#propDetailsTable').pageSize(newSize);
});
jQuery(function($){
	$('.table').footable({
		"columns": $.get('columns.json'),
		"rows": $.get('rows.json')
	});
}); */
</script>
  </body>
</html> 